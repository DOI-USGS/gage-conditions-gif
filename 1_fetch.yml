target_default: 1_fetch

packages:
  - dataRetrieval
  - yaml
  - httr
  - sf
  - sp
  - mapdata
  - maps
  - ncdf4
  - arrayhelpers
  - geoknife
  - dplyr
  - xml2
  - jsonlite

file_extensions:
  - ind

sources:
  - 1_fetch/src/map_utils.R

targets:

  1_fetch:
    depends:
      - 1_fetch/out/all_sites.rds.ind

  # -- read config --
  viz_config:
    command: yaml.load_file('viz_config.yml')
  dates:
    command: viz_config[[I('dates')]]

  # -- get sites and site info --

  # -- get streamdata --
