target_default: 1_fetch

packages:
  - dataRetrieval
  - dplyr

file_extensions:
  - ind

sources:
  - 1_fetch/src/map_utils.R
  - 1_fetch/src/fetch_dv_sites.R

targets:

  1_fetch:
    depends:
      - 1_fetch/out/sites.rds.ind

  # -- read config --
  viz_config:
    command: yaml.load_file('viz_config.yml')
  dates:
    command: viz_config[[I('dates')]]

  1_fetch/out/sites.rds.ind:
    command: fetch_dv_sites(
      ind_file = target_name,
      dates = dates)
  1_fetch/out/all_sites.rds:
    command: gd_get('1_fetch/out/sites.rds.ind')

  # -- get streamdata --
